<header class="sticky top-0 z-50 w-full border-b border-slate-200 bg-white/90 backdrop-blur px-4 md:px-10 py-3">
<div class="mx-auto flex max-w-[1440px] items-center gap-6">
<a class="flex items-center gap-2 text-primary shrink-0" href="/">
<span class="material-symbols-outlined text-3xl">precision_manufacturing</span>
<div class="leading-tight">
<div class="text-slate-900 text-xl md:text-2xl font-bold tracking-tight">CarParts<span class="text-primary">France</span></div>
<div class="hidden md:block text-[11px] font-semibold text-slate-500">Pièces auto • Catalogue • Devis</div>
</div>
</a>

<nav class="hidden lg:flex items-center gap-6 text-sm font-semibold text-slate-600">
<a class="hover:text-primary transition-colors" href="/">Accueil</a>
<a class="hover:text-primary transition-colors" href="/categorie">Catégories</a>
<a class="hover:text-primary transition-colors" href="/produits">Catalogue</a>
<a class="hover:text-primary transition-colors" href="/blog">Blog</a>
<a class="hover:text-primary transition-colors" href="/panier">Panier</a>
</nav>

<div class="hidden md:flex flex-1 max-w-2xl">
<form action="/produits" class="relative w-full" method="GET">
<div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-slate-400">
<span class="material-symbols-outlined text-xl">search</span>
 </div>
<input class="block w-full px-3 py-2.5 pl-10 text-sm text-slate-900 border border-slate-200 rounded-lg bg-slate-50 focus:ring-primary focus:border-primary" name="q" placeholder="Rechercher une pièce, une référence ou une marque..." type="text" value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>"/>
</form>
</div>

<div class="ml-auto flex items-center gap-3">
<% if (currentUser) { %>
<% const userAccountType = currentUser.accountType === 'pro' ? 'pro' : 'particulier'; %>
<% const userDiscountPercent = typeof currentUser.discountPercent === 'number' ? currentUser.discountPercent : 0; %>
<% const userDisplayName = userAccountType === 'pro' && currentUser.companyName ? currentUser.companyName : `${currentUser.firstName || ''} ${currentUser.lastName || ''}`.trim(); %>
<div class="hidden xl:flex items-center bg-slate-100 rounded-full px-4 py-2">
<div class="flex flex-col leading-tight text-right">
<div class="text-xs font-bold text-slate-900"><%= userDisplayName || 'Mon compte' %></div>
<div class="text-[10px] font-black uppercase tracking-widest <%= userAccountType === 'pro' ? 'text-primary' : 'text-slate-600' %>">
<%= userAccountType === 'pro' ? 'Professionnel' : 'Particulier' %>
<% if (userDiscountPercent > 0) { %>
 • Remise <%= userDiscountPercent %>%
<% } %>
</div>
</div>
</div>
<% } %>

<a aria-label="Rechercher" class="flex md:hidden items-center justify-center rounded-lg h-9 w-9 text-slate-700 hover:bg-slate-100 transition-colors" href="/produits">
<span class="material-symbols-outlined">search</span>
</a>

<a class="relative flex items-center justify-center rounded-lg h-9 w-9 text-slate-700 hover:bg-slate-100 transition-colors" href="/panier">
<span class="material-symbols-outlined">shopping_cart</span>
<span class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-white font-semibold"><%= typeof cartItemCount !== 'undefined' ? cartItemCount : 0 %></span>
</a>

<a class="hidden sm:flex items-center gap-2 px-3 py-2 border border-slate-200 rounded-lg text-slate-700 font-semibold text-sm hover:bg-slate-50 transition-colors" href="/compte">
<span class="material-symbols-outlined text-xl">account_circle</span>
<span>Mon Compte</span>
</a>
</div>
</div>
</header>

