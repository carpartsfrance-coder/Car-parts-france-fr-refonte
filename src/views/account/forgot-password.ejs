<%- include('../partials/head') %>
<%- include('../partials/header') %>

<main class="flex-1 bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200 transition-colors duration-300">
  <div class="mx-auto max-w-[900px] px-4 md:px-10 py-12">
    <div class="bg-white dark:bg-background-dark rounded-3xl border border-border-light dark:border-border-dark p-8 md:p-10">
      <div class="mb-8">
        <h1 class="text-3xl font-black text-gray-900 dark:text-white">Mot de passe oublié</h1>
        <p class="mt-2 text-gray-600 dark:text-gray-400">Entre ton email. Si un compte existe, tu recevras un lien pour créer un nouveau mot de passe.</p>
      </div>

      <% if (errorMessage) { %>
        <div class="mb-6 rounded-2xl border border-red-200 bg-red-50 p-5 text-red-900">
          <div class="font-bold">Erreur</div>
          <div class="mt-1 text-sm"><%= errorMessage %></div>
        </div>
      <% } %>

      <% if (successMessage) { %>
        <div class="mb-6 rounded-2xl border border-green-200 bg-green-50 p-5 text-green-900">
          <div class="font-bold">OK</div>
          <div class="mt-1 text-sm"><%= successMessage %></div>
        </div>
      <% } %>

      <form action="/compte/mot-de-passe-oublie" class="space-y-5 max-w-md" method="POST">
        <div>
          <label class="block text-sm font-semibold text-gray-900 dark:text-gray-200 mb-2" for="email">Email</label>
          <input class="w-full h-14 px-5 rounded-full border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 dark:text-white focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-all placeholder:text-gray-400" id="email" name="email" placeholder="votre@email.fr" required type="email" value="<%= typeof email !== 'undefined' ? email : '' %>" />
        </div>

        <button class="w-full h-14 bg-primary hover:bg-primary/90 text-white font-bold rounded-full shadow-lg shadow-primary/20 transition-all flex items-center justify-center gap-2" type="submit">
          Envoyer le lien
          <span class="material-symbols-outlined text-sm">mail</span>
        </button>

        <% if (!dbConnected) { %>
          <div class="mt-2 rounded-2xl border border-amber-200 bg-amber-50 p-5 text-amber-900">
            <div class="font-bold">Mode démo</div>
            <div class="mt-1 text-sm">La base de données est indisponible : l’opération ne peut pas fonctionner.</div>
          </div>
        <% } %>

        <div class="pt-2">
          <a class="text-sm font-bold text-primary hover:underline" href="/compte/connexion">Retour à la connexion</a>
        </div>
      </form>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>
